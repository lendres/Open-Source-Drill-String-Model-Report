\chapter{Aarsnes-Shor Code Alterations}
This appendix contains a list of modifications made to the Aarsnes-Shor model during the testing and evaluation.

\section{Matlab Ver.\ \codefont{torsionalWaveStep.m}}
Modifications were made to turn off the PI controller and rotate the drill string with a fixed velocity. Use of the function \textcode{torsionalWaveStet\_FixedVal.m} instead of the function \textcode{torsionalWaveStep.m} will turn off the PI controller. The input parameters were changed from \textcode{p}, \textcode{x}, \textcode{u} to \textcode{p}, \textcode{x}, \textcode{omega\_stat}, and \textcode{k} (\textcode{u} was removed and \textcode{omega\_stat} and \textcode{k} were added) where u is a structure array containing the top drive PI controller information, \textcode{omega\_stat} is the set point velocity of the top drive and \textcode{k} is the current step of the loop. Below explains the modifications of the code from \textcode{torsionalWaveStep.m}.

\begin{codemodifications}
\begin{codemodification}{120-124}
Added lines to set the top drive velocity. Top drive velocity will increase until the set point velocity is reached at the specified time.
\end{codemodification}

\begin{codemodification}{126-128}
Commented out the previous top drive velocity and torque updating procedure and added a new line for calculating the torque on the top drive.
\end{codemodification}
\end{codemodifications}

\section{Matlab Ver.\ \codefont{parameters\_WellB.m}}
This is the function for setting up the well data. For this project there are separated functions for each test cases, i.e., TestCase1.m, TestCase2.m etc. Modifications were made to add a buoyancy factor in the normal force calculation.
\begin{codemodifications}
\begin{codemodification}{82-84}
Added the buoyancy factor in the normal force calculation.
\end{codemodification}
\end{codemodifications}

\section{Python Ver.\ \codefont{dynamics.py}}
Turning off the PI controller and set the fixed angular velocity at top of the drill string.

\begin{codemodifications}

\begin{codemodification}{202-209, 267-274, 315}
Commented out to turn off the PI controller.
\end{codemodification}
\begin{codemodification}{214-220}
Code added to increase the top drive speed to the set point at the specified time.
\end{codemodification}
\begin{codemodification}{276-278, 316}
Code added to calculate the torque on the top drive (torque at the top of the drill string) without the PI controller.
\end{codemodification}
\end{codemodifications} 